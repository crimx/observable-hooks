(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{312:function(e,t,a){"use strict";a.r(t);var s=a(17),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"core-concepts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core-concepts"}},[e._v("#")]),e._v(" Core Concepts")]),e._v(" "),t("h2",{attrs:{id:"two-worlds"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#two-worlds"}},[e._v("#")]),e._v(" Two Worlds")]),e._v(" "),t("p",[e._v("To understand the design behind observable-hooks you should have two worlds in mind: the Observable World and the Normal World.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n  +--------------------------------+\n  |                                |\n  |        Observable World        |\n  |                                |\n  +--------------------------------+\n\n         +------------------+\n         | observable-hooks |\n         +------------------+\n\n  +--------------------------------+\n  |                                |\n  |          Normal World          |\n  |                                |\n  +--------------------------------+\n\n")])])]),t("p",[e._v("These two worlds are just conceptual partition. The Observable World is where the observable pipelines are placed. It could be inside or outside of the React components. The Normal World is anyplace that does not belong to the Observable World.")]),e._v(" "),t("h2",{attrs:{id:"observable-to-normal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#observable-to-normal"}},[e._v("#")]),e._v(" Observable to Normal")]),e._v(" "),t("p",[e._v("Almost every RxJS-React binding library provides ways to connect observable values to React state.")]),e._v(" "),t("h3",{attrs:{id:"observable-to-state"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#observable-to-state"}},[e._v("#")]),e._v(" Observable to State")]),e._v(" "),t("p",[e._v("In observable-hooks we have "),t("RouterLink",{attrs:{to:"/api/#useobservablestate"}},[t("code",[e._v("useObservableState")])]),e._v(", "),t("RouterLink",{attrs:{to:"/api/#useobservableeagerstate"}},[t("code",[e._v("useObservableEagerState")])]),e._v(" and "),t("RouterLink",{attrs:{to:"/api/#uselayoutobservablestate"}},[t("code",[e._v("useLayoutObservableState")])]),e._v(".")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n  +--------------------------------+\n  |        Observable World        |\n  +--------------------------------+\n  |                                |\n  |             input$             |\n  |                                |\n  +--------------------+-----------+\n                       |\n                       |\n                       |\n           v-----------+\n  const output = useObservableState(\n           |       input$,\n           |       initialOutput\n           |     )\n           |\n           |\n           |\n           |\n  +--------v-----------------------+\n  |          Normal World          |\n  +--------------------------------+\n  |                                |\n  |         <p>{output}</p>        |\n  |                                |\n  +--------------------------------+\n\n")])])]),t("h3",{attrs:{id:"observable-to-callbacks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#observable-to-callbacks"}},[e._v("#")]),e._v(" Observable to Callbacks")]),e._v(" "),t("p",[e._v("In addition to states, you can also call observer callbacks with "),t("RouterLink",{attrs:{to:"/api/#usesubscription"}},[t("code",[e._v("useSubscription")])]),e._v(". See the "),t("RouterLink",{attrs:{to:"/api/#usesubscription"}},[e._v("API docs")]),e._v(" for why it is preferred comparing to manual "),t("code",[e._v("useEffect")]),e._v(".")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n  +--------------------------------+\n  |        Observable World        |\n  +--------------------------------+\n  |                                |\n  |             input$             |\n  |                                |\n  +-------------------+------------+\n                      |\n                      |\n                      |\n                      v\n    useSubscription(input$, onNext)\n                              |\n                              |\n                              |\n                              |\n  +---------------------------v----+\n  |          Normal World          |\n  +--------------------------------+\n  |                                |\n  |   const onNext = v => log(v)   |\n  |                                |\n  +--------------------------------+\n\n")])])]),t("h2",{attrs:{id:"normal-to-observable-back-to-normal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#normal-to-observable-back-to-normal"}},[e._v("#")]),e._v(" Normal to Observable back to Normal")]),e._v(" "),t("p",[e._v("Some libraries also provide ways to create observables from Normal World, subscribe to those observables, then connect emitted values back to Normal World.")]),e._v(" "),t("p",[e._v("We can create observables somewhere outside of React components and somehow pass them in, but most likely we would like to create observables inside React components.")]),e._v(" "),t("p",[e._v("There are two ways to achieve that:")]),e._v(" "),t("ol",[t("li",[e._v("Event function callbacks. Every time the callback is called, a value is emitted from a Subject.")]),e._v(" "),t("li",[e._v("Hook dependencies. Changes of props, states or context will trigger component re-rendering. Hooks like "),t("code",[e._v("useEffect")]),e._v(" can be used to collect changes.")])]),e._v(" "),t("h3",{attrs:{id:"function-callbacks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-callbacks"}},[e._v("#")]),e._v(" Function Callbacks")]),e._v(" "),t("p",[e._v("In observable-hooks "),t("RouterLink",{attrs:{to:"/api/#useobservablestate"}},[t("code",[e._v("useObservableState")])]),e._v(" can also be used for function callbacks.")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n     +--------------------------------+\n     |        Observable World        |\n     +--------------------------------+\n     |                                |\n     |  const transform =             |\n     |    input$ => input$.pipe(...)  |\n     |                                |\n     +-------------^----------+-------+\n                   |          |\n                   |          |\n                   |          |\n          v-------------------+\n const [output, onInput] = useObservableState(\n          |        ^         transform,\n          |        |         initialOutput\n          |        |       )\n          |        |\n          |        |\n          |        |\n     +----v--------+------------------+\n     |          Normal World          |\n     +--------------------------------+\n     |                                |\n     |   <button onClick={onInput}>   |\n     |    {output}                    |\n     |   </button>                    |\n     |                                |\n     +--------------------------------+\n\n")])])]),t("h3",{attrs:{id:"hook-dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hook-dependencies"}},[e._v("#")]),e._v(" Hook dependencies")]),e._v(" "),t("p",[e._v('This is a little different in observable-hooks which does not provide a "Normal-Observable-Normal" way with hook dependencies.')]),e._v(" "),t("p",[e._v("If you read back on what we have just discussed, you should notice that we always end up in the Normal World. But observable-hooks truly shines with its ability to end in the Observable World. Keep reading and I will show you what it means.")]),e._v(" "),t("h2",{attrs:{id:"normal-to-observable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#normal-to-observable"}},[e._v("#")]),e._v(" Normal to Observable")]),e._v(" "),t("h3",{attrs:{id:"hook-dependencies-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hook-dependencies-2"}},[e._v("#")]),e._v(" Hook dependencies")]),e._v(" "),t("p",[e._v("In observable-hooks you can use "),t("RouterLink",{attrs:{to:"/api/#useobservable"}},[t("code",[e._v("useObservable")])]),e._v(" or "),t("RouterLink",{attrs:{to:"/api/#uselayoutobservable"}},[t("code",[e._v("useLayoutObservable")])]),e._v(" to create observables with hook dependencies.")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n   +--------------------------------+\n   |        Observable World        |\n   +--------------------------------+\n   |                                |\n   | const transform =              |\n   |   inputs$ => inputs$.pipe(...) |\n   |                                |\n   |   output$                      |\n   +------^-------------------------+\n          |\n          |\n          |\n          +--------------+\n const output$ = useObservable(\n                   transform,\n                   [props.A, state, ctx]\n                 )       ^\n                         |\n                         |\n                         |\n   +---------------------+----------+\n   |          Normal World          |\n   +--------------------------------+\n   |                                |\n   | const App(props) {             |\n   |   const [state] = useState()   |\n   |   const ctx = useContext(Ctx)  |\n   | }                              |\n   |                                |\n   +--------------------------------+\n\n")])])]),t("h3",{attrs:{id:"function-callbacks-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-callbacks-2"}},[e._v("#")]),e._v(" Function Callbacks")]),e._v(" "),t("p",[e._v("You can also use "),t("RouterLink",{attrs:{to:"/api/#useobservablecallback"}},[t("code",[e._v("useObservableCallback")])]),e._v(" to create observables from function callbacks.")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n        +--------------------------------+\n        |        Observable World        |\n        +--------------------------------+\n        |                                |\n        |  const transform =             |\n        |    input$ => input$.pipe(...)  |\n        |                                |\n        |           output$              |\n        +--------------^-----------------+\n                       |\n            +-----+    |\n            |     v    +\n const [onInput, output$] = useObservableCallback(\n            ^                 transform\n            |               )\n            |\n            |\n            |\n            |\n        +---+----------------------------+\n        |          Normal World          |\n        +--------------------------------+\n        |                                |\n        |   <button onClick={onInput}>   |\n        |    Click                       |\n        |   </button>                    |\n        |                                |\n        +--------------------------------+\n\n")])])]),t("p",[e._v("The resulted observables can then be consumed by "),t("a",{attrs:{href:"#observable-to-normal"}},[e._v("Observable to Normal")]),e._v(" with "),t("RouterLink",{attrs:{to:"/api/#useobservablestate"}},[t("code",[e._v("useObservableState")])]),e._v(" or "),t("RouterLink",{attrs:{to:"/api/#usesubscription"}},[t("code",[e._v("useSubscription")])]),e._v(".")],1),e._v(" "),t("h3",{attrs:{id:"ref-to-observable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ref-to-observable"}},[e._v("#")]),e._v(" Ref to Observable")]),e._v(" "),t("p",[e._v("You can also use "),t("RouterLink",{attrs:{to:"/api/#useobservableref"}},[t("code",[e._v("useObservableRef")])]),e._v(" to create observables from ref value.")],1),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n        +--------------------------------+\n        |        Observable World        |\n        +--------------------------------+\n        |                                |\n        |         value$                 |\n        +-----------^--------------------+\n                    |\n            +----+  |\n            |    v  +\n    const [ref, value$] = useObservableRef(\n            ^               initialValue\n            |             )\n            |\n            |\n            |\n            |\n        +---+----------------------------+\n        |          Normal World          |\n        +--------------------------------+\n        |                                |\n        |   <button ref={ref}>           |\n        |    Click                       |\n        |   </button>                    |\n        |                                |\n        |   // or                        |\n        |   ref.current = xxx            |\n        +--------------------------------+\n\n")])])]),t("p",[e._v("The resulted observables can then be consumed by "),t("a",{attrs:{href:"#observable-to-normal"}},[e._v("Observable to Normal")]),e._v(" with "),t("RouterLink",{attrs:{to:"/api/#useobservablestate"}},[t("code",[e._v("useObservableState")])]),e._v(" or "),t("RouterLink",{attrs:{to:"/api/#usesubscription"}},[t("code",[e._v("useSubscription")])]),e._v(".")],1),e._v(" "),t("h2",{attrs:{id:"observable-to-observable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#observable-to-observable"}},[e._v("#")]),e._v(" Observable to Observable")]),e._v(" "),t("p",[e._v("Finally, you can also operate on multiple observables. This flexibility is powerful and can greatly simplify the observable flow design.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n    +--------------------------------+\n    |        Observable World        |\n    +--------------------------------+\n    |                                |\n    |           fromProps$           |\n    |                                |\n    |           fromState$           |\n    |                                |\n    |           fromGlobal$          |\n    |                                |\n    |  output$                       |\n    +-----^--------------+-----------+\n          |              |\n          |              |\n          +--------------v\n  const output$ = useObservable(\n                    () => combineLatest([\n                      fromProps$,\n                      fromState$,\n                      fromGlobal$\n                    ])\n                  )\n\n    +--------------------------------+\n    |                                |\n    |          Normal World          |\n    |                                |\n    +--------------------------------+\n\n")])])]),t("p",[e._v("The resulted observables can then be consumed by "),t("a",{attrs:{href:"#observable-to-normal"}},[e._v("Observable to Normal")]),e._v(" with "),t("RouterLink",{attrs:{to:"/api/#useobservablestate"}},[t("code",[e._v("useObservableState")])]),e._v(" or "),t("RouterLink",{attrs:{to:"/api/#usesubscription"}},[t("code",[e._v("useSubscription")])]),e._v(".")],1),e._v(" "),t("h2",{attrs:{id:"helpers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#helpers"}},[e._v("#")]),e._v(" Helpers")]),e._v(" "),t("p",[e._v("There are also sugars like "),t("RouterLink",{attrs:{to:"/api/#useobservablegetstate"}},[t("code",[e._v("useObservableGetState")])]),e._v(" and "),t("RouterLink",{attrs:{to:"/api/#useobservablepickstate"}},[t("code",[e._v("useObservablePickState")])]),e._v(" which are inspired by lodash "),t("code",[e._v("get")]),e._v(" and "),t("code",[e._v("pick")]),e._v(".")],1),e._v(" "),t("p",[e._v("The "),t("a",{attrs:{href:"https://redux-observable.js.org/docs/basics/Epics.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Epic"),t("OutboundLink")],1),e._v("-like signature makes the observable transformation logic highly reusable. In fact observable-hooks offers some "),t("RouterLink",{attrs:{to:"/api/helpers.html"}},[e._v("helpers")]),e._v(" for common cases to reduce garbage collection burden.")],1)])}),[],!1,null,null,null);t.default=n.exports}}]);